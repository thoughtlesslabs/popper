pico-8 cartridge // http://www.pico-8.com
version 27
__lua__
--popper
--thoughtless labs
--a silly game about popcorn

function _init()
	cls()
	mode="start"
end

--set game mode
function _update()
	if mode=="start" then
		updatestart()
	elseif mode=="game" then
		updatekern()
	end
end

--update and reset game
function updatestart()
	cls()
	mode="game"
	kern()
	pop=false
	popcount = 0
	if btnp(4) then
		updatekern()
	end
end

--generate popcorn kernels
function kern()
		x={}
		y={}
		v={}
  n={}
		for i=1,50 do 
			add(x,flr(mid(1,rnd(110),110)))
			add(y,flr(mid(1,rnd(110),110)))
			add(v,true)
			add(n,i)
		end
end

--kernel jitter

function jitter()
	jit={}
	for i=1,50 do
		add(jit,rnd(2))
	end
end

--pop kernels base on user input
function updatekern()
--	allpopped = false
	if btnp(4) then
   --pick random kernel to pop
			randnum=flr(rnd(n))
			--check if kernel is already popped
   if v[randnum]==false then
    del(n,randnum)
			elseif v[randnum] then
				v[randnum]=false
				pop=true
				sfx(0)
				popcount+=1
			end
 end
end

function drawkern()
	local i
	cls(5)
	jitter()
	--rectfill(35,35,95,60,4)	
	for i=1,#x do
		if v[i] then
			spr(2,x[i]+rnd(jit),y[i]+rnd(jit))
		elseif pop then
			spr(1,x[i]+5,y[i]+5)
		end
	end
	
	if not(pop) then
		print("press üÖæÔ∏è to pop",35,10,7)
	elseif popcount==#x then
		retry()
	end
end	

function retry()
	rectfill(35,35,95,60,4)
	print("play again?",45,40,7)
	print("press ‚ùé",50,50,7)
	update_retry()
end

function update_retry()
	if btn(5) then
		mode="start"
	end
end

function _draw()
	if mode=="game" then
		drawkern()
	elseif mode=="start" then
		updatestart()
	end
end
__gfx__
00000000000777000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000009777000000499000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700779977700004449000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000779977700044444000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000777777000044440000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700077777700004400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000007077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__label__
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555554499555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555444449555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555444444555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555554444444555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555554444445555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555444455555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555554499555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555444449555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555444444555449955555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555554444444544444955555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555554444445544499455555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555544995555555555555555555444455444449455555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555554444495555555555555555555555555444444555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555554444445555555555555555555555554444444555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555544444445555555555555555555555554444445449955555555555555555555555555555
55555555555555555555555555555555555555555555555555555555544444455555555555555555555555555444444444955555555555555555555555555555
55555555555555555555555555555555555555555555555555555555554444555555555555555555555555555555544444455555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555444444455555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555444444555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555544445555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555554499555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555544995555444449555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555554444495555444444555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555554444445554444444555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555544444445554444445555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555544444455555444455555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555554444555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555449955555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555544444955555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555544444455555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555444444455555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555444444555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555544445555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555554499555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555444449555555555555555554499555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555444444555555555555555444449555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555554444444555555555555555444444555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555554444445555555555555554444444555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555444455555555555555554444445555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555444455555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555544995555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555554444495555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555554444445555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555544444445555555555555555544995555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555544444455555555555555554444495555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555554444555555555555555554444445555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555544444445555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555544444455555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555554444555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555544995555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555554444495555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555554444445555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555544444445555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555544444455555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555554444555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555554499555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555444449555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555444444555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555554444444555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555554444445555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555444455555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555

__sfx__
000100002a65025650206501a650126500a6500760001600006001b6000b6000f60023600006002860008600096002e6000b6000f600126001960000600006000060000600006000060000600006000060000600
