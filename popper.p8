pico-8 cartridge // http://www.pico-8.com
version 27
__lua__
--popper
--thoughtless labs
--a silly game about popcorn

function _init()
	cls()
	mode="start"
end


function _update60()
	if mode=="start" then
		startgame()
	elseif mode=="game" then
		updatekern()
	elseif mode=="retry" then
		updateretry()
	end
end

function startgame()
	mode="game"
	kern()
	pop=false
end

function kern()
		x={}
		y={}
		v={}
		for i=1,15 do 
			add(x,mid(1,rnd(110),110))
			add(y,mid(1,rnd(110),110))
			add(v,true)
		end
end

function updatekern()
	if btnp(4) and pop==false then
		for i=1,#x do
			v[i]=false
		end
 sfx(0)
 pop = true
	end
end

function drawkern()
	local i
	cls(5)	
	for i=1,#x do
		if v[i] then
			spr(2,x[i],y[i])
		elseif pop then
			spr(1,x[i]+5,y[i]+5)
		end
	end
	
	if pop then
		retry()
	end
end	

function retry()
	rectfill(35,35,95,60,4)
	print("play again?",45,40,7)
	print("press ‚ùé",50,50,7)
	update_retry()
end

function update_retry()
	if btn(5) then
		mode="start"
	end
end

function _draw()
	if mode=="game" then
		drawkern()
	elseif mode=="retry" then
		start()
	end
end
__gfx__
00000000000077700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000477700004499000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700077477700444449000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000077447700444444000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000077777704444444000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700077777704444440000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000007777700444400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__sfx__
000100002a65025650206501a650126500a6500760001600006001b6000b6000f60023600006002860008600096002e6000b6000f600126001960000600006000060000600006000060000600006000060000600
